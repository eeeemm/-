/*******************************************************************************
* File: typedefs.h                                                               
* Description:
* Type definitions for use with the system.
*******************************************************************************/
#include"configuration.h"

/******************************************************************************/
/* New variables */
extern bit NewRec;
extern bit SendEnd;

/******************************************************************************
Function Definitions
******************************************************************************/

/*---------------------------------------------------------------------------*/
/* Public Functions */
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
/* Protected Functions */
/*---------------------------------------------------------------------------*/

/*-----------------------------------------------------------------------------
Function: UARTInit
Description:串口初始化.
*/
void UARTInit(void)		
{
	TMOD 	= 0x20;					//T1定时方式2,8位自动重装
	TH1 	= 0xfd;					//9600b/s
	TL1		= 0xfd;		
	PCON 	= 0;						//波特率不加倍
	SCON 	= 0x50;					//串口方式1，T1与R1清零，容许接收
	TR1 	= 1;						//启动T1
}
/*-----------------------------------------------------------------------------
Function: UARTSend
Description:串口发送数据.
*/
void UARTSend(u8 Data){
	while(SendEnd == 0);	//等待上一次发送完成，可用延时替代
	SBUF 	= Data;					//发送数据/命令
	SendEnd = 0;					//发送标志清零
}

